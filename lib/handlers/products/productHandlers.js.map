{"version":3,"file":"productHandlers.js","names":["_productRepository","require","getProducts","ctx","products","getAllProducts","limit","sort","request","query","docs","a","b","Date","createdAt","slice","parseInt","length","body","data","count","e","status","success","error","message","getOne","id","params","product","getOneProduct","createOne","postData","createProduct","updateOne","mergeData","updateProduct","removeOne","removeProduct"],"sources":["../../../src/handlers/products/productHandlers.js"],"sourcesContent":["import {\r\n  getAll as getAllProducts,\r\n  getOne as getOneProduct,\r\n  create as createProduct,\r\n  update as updateProduct,\r\n  remove as removeProduct,\r\n} from \"../../database/productRepository\";\r\n\r\nexport async function getProducts(ctx) {\r\n  try {\r\n    const products = getAllProducts();\r\n    const { limit, sort } = ctx.request.query;\r\n\r\n    const docs = products\r\n      .sort((a, b) => {\r\n        if (sort === \"desc\")\r\n          return new Date(b.createdAt) - new Date(a.createdAt);\r\n        else if (sort === \"asc\")\r\n          return new Date(a.createdAt) - new Date(b.createdAt);\r\n      })\r\n      .slice(0, parseInt(limit) || products.length);\r\n    ctx.body = {\r\n      data: docs,\r\n      count: docs.length,\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function getOne(ctx) {\r\n  try {\r\n    const { id } = ctx.request.params;\r\n    const product = getOneProduct(id);\r\n    ctx.body = {\r\n      data: product,\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function createOne(ctx) {\r\n  try {\r\n    const postData = ctx.request.body;\r\n    createProduct(postData);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function updateOne(ctx) {\r\n  try {\r\n    const data = ctx.request.body;\r\n    const id = ctx.request.params;\r\n    const mergeData = {\r\n      ...id,\r\n      ...data,\r\n    };\r\n    updateProduct(mergeData);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function removeOne(ctx) {\r\n  try {\r\n    const { id } = ctx.request.params;\r\n    removeProduct(id);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n"],"mappings":"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"}