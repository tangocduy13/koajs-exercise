{"version":3,"file":"productHandlers.js","names":["_productRepository","require","getProducts","ctx","limit","sort","request","query","products","getAllProducts","body","data","count","length","e","status","success","error","message","getOne","id","params","product","getOneProduct","createOne","postData","createProduct","updateOne","mergeData","updateProduct","removeOne","removeProduct"],"sources":["../../../src/handlers/products/productHandlers.js"],"sourcesContent":["import {\r\n  getAll as getAllProducts,\r\n  getOne as getOneProduct,\r\n  create as createProduct,\r\n  update as updateProduct,\r\n  remove as removeProduct,\r\n} from \"../../database/productRepository\";\r\n\r\nexport async function getProducts(ctx) {\r\n  try {\r\n    const { limit, sort } = ctx.request.query;\r\n    const products = getAllProducts(limit, sort);\r\n\r\n    ctx.body = {\r\n      data: products,\r\n      count: products.length,\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function getOne(ctx) {\r\n  try {\r\n    const { id } = ctx.request.params;\r\n    const product = getOneProduct(id);\r\n    ctx.body = {\r\n      data: product,\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function createOne(ctx) {\r\n  try {\r\n    const postData = ctx.request.body;\r\n    createProduct(postData);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function updateOne(ctx) {\r\n  try {\r\n    const data = ctx.request.body;\r\n    const id = ctx.request.params;\r\n    const mergeData = {\r\n      ...id,\r\n      ...data,\r\n    };\r\n    updateProduct(mergeData);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function removeOne(ctx) {\r\n  try {\r\n    const { id } = ctx.request.params;\r\n    removeProduct(id);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n"],"mappings":"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"}