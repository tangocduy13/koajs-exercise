{"version":3,"file":"productHandlers.js","names":["_productRepository","require","getProducts","ctx","limit","sort","request","query","products","getListProducts","body","data","count","length","e","status","success","error","message","getOne","id","params","fields","product","getOneProduct","throw","createOne","postData","createProduct","updateOne","mergeData","updateProduct","removeOne","removeProduct"],"sources":["../../../src/handlers/products/productHandlers.js"],"sourcesContent":["import {\r\n  getList as getListProducts,\r\n  getOne as getOneProduct,\r\n  create as createProduct,\r\n  update as updateProduct,\r\n  remove as removeProduct,\r\n} from \"../../database/productRepository\";\r\n\r\nexport async function getProducts(ctx) {\r\n  try {\r\n    const { limit, sort } = ctx.request.query;\r\n    const products = getListProducts({ limit, sort });\r\n\r\n    ctx.body = {\r\n      data: products,\r\n      count: products.length,\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function getOne(ctx) {\r\n  try {\r\n    const id = ctx.params.id;\r\n    const fields = ctx.query.fields;\r\n\r\n    const product = getOneProduct({ id, fields });\r\n    if (!product) {\r\n      ctx.throw(404, \"Product Not Found\", { data: [], success: false });\r\n      return;\r\n    }\r\n    ctx.body = {\r\n      data: product,\r\n    };\r\n  } catch (e) {\r\n    ctx.status = 404;\r\n    ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function createOne(ctx) {\r\n  try {\r\n    const postData = ctx.request.body;\r\n    createProduct(postData);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function updateOne(ctx) {\r\n  try {\r\n    const data = ctx.request.body;\r\n    const id = ctx.request.params;\r\n    const mergeData = {\r\n      ...id,\r\n      ...data,\r\n    };\r\n    updateProduct(mergeData);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function removeOne(ctx) {\r\n  try {\r\n    const id = ctx.params.id;\r\n    removeProduct({ id });\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 400;\r\n    ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    };\r\n  }\r\n}\r\n"],"mappings":"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"}